<h1>Edit Relay</h1>

<%= form_tag update_multiple_athlets_path, method: :put, class: 'form-horizontal' do %>
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-heading">Relay</div>
        <div class="panel-body">
          <%= simple_fields_for @athlets.first, html: { class: 'form-horizontal' }, wrapper: :horizontal_form do |f| %>
            <div class="row">
              <div class="col-md-6">
            <%= f.input :starter %>
            <%= f.input :club, :input_html => {
              :data => { :autocomplete => autocomplete_club_athlets_path } } %>
        </div>
              <div class="col-md-6">
            <%= f.input :event %>
          </div>
        </div>
          <% end %>
        </div>
      </div>
    </div>
    <% @athlets.each do |athlet| %>

      <% if false %><!-- Errors -->
        <li>
          <%= hidden_field_tag "athlet_ids[]", athlet.id %>
          <%= athlet.surname %>
          <ul class="errors">
            <% athlet.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </li>
      <% end %>


      <div class="col-md-6">
        <div class="panel panel-info">
          <div class="panel-heading">Athlet</div>
          <div class="panel-body">
            <%= simple_fields_for "athlets[]", athlet, wrapper: :horizontal_form do |f| %>
              <% if athlet.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(athlet.errors.count, "error") %> prohibited this athlet from being saved:</h2>
                  <ul>
                  <% athlet.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                  </ul>
                </div>
              <% end %>
              <%= f.input :firstname, :input_html => {
                :data => { :autocomplete => autocomplete_firstname_athlets_path } } %>
              <%= f.input :surname, :input_html => {
                :data => { :autocomplete => autocomplete_surname_athlets_path } } %>
              <%= f.input :birthday, :as => :integer, :input_html => { :value => athlet.birthday } %>
              <%# http://stackoverflow.com/questions/10767859/overriding-model-attribute-readers-does-not-affect-simple-form-input-fields %>
              <%#= f.input :sex %>

              <%= f.input :sex, collection: [:M, :F] %>

              <%= f.input :relaytmsize, :as => :hidden %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <div class="actions">
    <%= submit_tag "Update" %>
  </div>
<% end %>